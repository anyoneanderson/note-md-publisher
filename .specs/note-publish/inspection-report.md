# spec-inspect Report — note-publish（再検査）

## 検査概要

| 項目 | 値 |
|------|-----|
| 検査日 | 2026-02-25（再検査） |
| 対象プロジェクト | note-publish |
| 対象ファイル | requirement.md, design.md, tasks.md |
| 合計行数 | 188 + 641 + 371 = 1,200行 |

## 検査結果サマリー

| 深刻度 | 件数 | 前回比 |
|--------|------|--------|
| CRITICAL | 0 | - |
| WARNING | 0 | -4 |
| INFO | 2 | -3 |

---

## CRITICAL

None

---

## WARNING

None

---

## INFO

### [INFO-001] 要件IDの並び順が不連続

- **ファイル**: requirement.md:97-124
- **詳細**: REQ-P008 が REQ-P009、REQ-P010 の後に配置されている（セクション構成上「オーケストレーション」→「既存スキルの整理」の順）。機能的には問題ないが、IDの連番が崩れている。
- **提案**: セクション構成を維持する場合は現状のままでも可。

---

### [INFO-002] ドキュメント更新が必要: CLAUDE.md の Architecture セクション

- **ファイル**: CLAUDE.md（プロジェクトルート）
- **詳細**: CLAUDE.md の Architecture セクションは現在のフラット構造（ルート SKILL.md）を記載しており、`skills/` ディレクトリ構成が反映されていない。tasks.md TP14 で対応予定。
- **提案**: TP14 実行時に確実に更新する。

---

## 修正済み項目（前回 WARNING → 解消）

| 前回ID | 内容 | 修正内容 |
|--------|------|---------|
| WARNING-001 | `--skip-publish` の動作定義が不一致 | design.md §4.2 を requirement.md に合わせて修正。`--skip-publish` = 「タグ設定のみ、公開なし」に統一 |
| WARNING-002 | トレーサビリティマトリックスが不完全（68%） | CON-P001〜P003、ASM-P001〜P003 を追加（19/19 = 100%） |
| WARNING-003 | 「技術スタック」「セキュリティ設計」セクションなし | §10 技術スタック、§11 セキュリティ設計を追加 |
| WARNING-004 | `--draft-only` のエイリアス関係が矛盾 | `--draft-only` を独立モード（note-draft のみ）として明確に定義 |

## 修正済み項目（前回 INFO → 解消）

| 前回ID | 内容 | 修正内容 |
|--------|------|---------|
| INFO-001 | 曖昧表現「適切な待機時間」 | `waitForSelector` + ネットワークアイドル確認に具体化 |
| INFO-004 | 未参照の要件ID | トレーサビリティマトリックスに追加（WARNING-002 と同時解決） |
| INFO-005 | `noteKey` vs `articleKey` の表記揺れ | `articleKey` に統一 |

---

## チェック結果一覧

| # | チェック項目 | 結果 |
|---|-------------|------|
| 1 | 要件ID整合性 | ✅ 全19件が design.md / tasks.md で参照済み |
| 2 | 必須セクション | ✅ 全セクション存在（技術スタック・セキュリティ設計 追加済み） |
| 3 | 矛盾検出 | ✅ --skip-publish / --draft-only の矛盾を解消 |
| 4 | 曖昧表現 | ✅ 「適切な」→ 具体的な待機戦略に修正 |
| 5 | 用語一貫性 | ✅ articleKey に統一 |
| 6 | 設計→タスク カバレッジ | ✅ 全設計コンポーネントに対応タスクあり |
| 7 | 依存関係検証 | ✅ 循環なし、逆順なし |
| 8 | 実現不可能要件 | ✅ 検出なし |
| 9 | 欠落要件検出 | ✅ 検出なし |
| 10 | 命名規則一貫性 | ✅ kebab-case（ファイル）、camelCase（関数）統一 |
| 11 | ディレクトリ構造一貫性 | ✅ scripts/, lib/, tests/, skills/ で整理 |
| 12 | 車輪の再発明検出 | ✅ 検出なし（Playwright, gray-matter 既存利用） |
| 13 | プロジェクトルール準拠 | ✅ ESM, node:test, Cookie保存パス 準拠 |
| 14 | API/UI命名規則 | ✅ CLI フラグは kebab-case 統一 |
| 15 | ドキュメント更新分析 | ⚠️ CLAUDE.md の Architecture セクション要更新（TP14 で対応予定） |
